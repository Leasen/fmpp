To build FMPP, you will need JDK (Java Development Kit) and Apache Ant to
be installed.

This text describes how to (re)build FMPP and related files.

To build lib/fmpp.jar (incremental building): `ant`
To build the docs: `ant docs`
To build both: `ant all`
To remove earlier build output: `ant clean`


Making a release
----------------

1. Release to sourcefoge.net:

* Ensure that the version number in src/main/java/fmpp/version.properties is
  up to date.
  
  Note: Releases use major.minor.micro format, like "0.8.15". Nightly releases
  has an additional ".5" at the end, like in "0.8.15.5", which is a nightly
  release *after* "0.8.15". Note that the version number can't contain letters
  because of the limitations of jar manifest format.

* Ensure that all properties in build.properties are set correctly.
  (Copy build.properties.sample if you don't have build.properties yet.)

* Ensure that the proper version of the dependencies are in the lib
  directory.

* `ant clean test` must pass successfully.

* An extracted FreeMarker release of the proper version must be
  at the location deduced from the build.properties (see
  freemarkerDocs.path in build.xml), as that's where we will
  copy the FreeMarker documentation from.

* Ensure that you haven't polluted the FMPP directories with some
  temporary files (your ad-hoc tests, backups, etc.). Note that typical
  noise like *.bak, *.~*, SVN files, etc. should be filtered out
  automatically by Ant.

* Run "ant clean dist"

* Release the generated tar.gz and zip on sourceforge.net.
  Check their content before that, of course.

2. Release to to the Maven Central Repository
  
* Run `ant maven-dist`.

  Note that unlike sourceforge.net releases, this can't be redone
  if something was wrong in fmpp.jar, so be careful.

3. Update the Web site:

* The site generation will use the FMPP version number and also
  build/dist/fmpp_x.x.x.tar.gz and zip, so be sure that these are
  there correct. If have just built the release with `ant dist`, then it
  shouldn't be a problem.
  
  Note: The download link will use the download system of sourceforge.net.
  That is, you do not upload the tar.gz and zip to the WWW site, but do an
  FMPP release on SourceForge with the correct version number.

* Run `ant site`

* Upload the generated site.
